@model vimmvc.ViewModels.CreateStaffViewModel
@{
    ViewData["Title"] = "Goods";
    Layout = "_GlobalAdminLayout";
    var students = ViewBag.Students as List<Core.Entities.ApplicationUser>;
    var count = 1;
}
<style>
    .form {
        /*height: 520px;*/
        width: 100%;
        /*background-color: rgba(255,255,255,0.13);*/
        background-color: white;
        /*position: absolute;*/
        /*transform: translate(-50%,-50%);*/
        /*top: 50%;*/
        /*left: 50%;*/
        border-radius: 10px;
        /*backdrop-filter: blur(10px);*/
        border: 2px solid rgba(255,255,255,0.1);
        box-shadow: 0 0 40px rgba(8,7,16,0.6);
        padding: 50px 35px;
    }

        .form * {
            font-family: 'Poppins',sans-serif;
            color: rgb(8,7,16);
            letter-spacing: 0.5px;
            outline: none;
            /*border: none;*/
        }

        .form h3 {
            font-size: 32px;
            font-weight: 500;
            line-height: 42px;
            text-align: center;
            color: rgb(8,7,16);
        }

    .label {
        display: block;
        margin-top: 8px;
        font-size: 16px;
        font-weight: 500;
        color: rgb(8,7,16);
    }

    input {
        display: block;
        height: 50px;
        width: 100%;
        background-color: rgba(255,255,255,0.07);
        border-radius: 3px;
        padding: 0 10px;
        margin-top: 2px;
        font-size: 14px;
        font-weight: 300;
        border: 1px solid rgb(8,7,16);
    }

    ::placeholder {
        color: #080710;
    }
</style>
<div>
    <div class="d-flex pt-1 pb-1">
        <button style="background-color: #1D7874; color:whitesmoke;" type="button" class="btn" data-toggle="modal" data-target="#exampleModal">Filter by subscribed only</button>
    </div>


    <form asp-action="AddProduct" asp-controller="Product">
        <div id="exampleModal" class="modal" tabindex="-1" role="dialog">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-body form">
                        <div class="modal-header">
                            <h5 class="modal-title">Staff Details</h5>
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                            </button>
                        </div>
                        <div class="form-group">
                            <label asp-for="@Model.FirstName">First name:</label>
                            <input type="text" asp-for="@Model.FirstName" placeholder="Enter first name" />
                        </div>

                        <div class="form-group">
                            <label asp-for="@Model.LastName">Last name:</label>
                            <input type="text" asp-for="@Model.LastName" placeholder="Enter last name" />
                        </div>

                        <div class="form-group">
                            <label class="label" asp-for="@Model.CourseName">Course:</label>
                            <input type="text" asp-for="@Model.CourseName" placeholder="0.00" />
                        </div>

                        <div class="form-group">
                            <label class="label" asp-for="@Model.Email">Email:</label>
                            <input type="email" asp-for="@Model.Email" placeholder="example@gmail.com" />
                        </div>

                        <div class="form-group">
                            <label class="label" asp-for="@Model.Salary">Salary:</label>
                            <input type="Number" asp-for="@Model.Salary" placeholder="0.00" />
                        </div>

                        <div class="form-group">
                            <label class="label" asp-for="@Model.ProfilePic">Profile Photo:</label>
                            <input type="file" asp-for="@Model.ProfilePic" />
                        </div>

                        <div class="modal-footer">
                            <button style="background: #E7AB3C !important; border: none;" type="submit" class="btn btn-primary">Save changes</button>
                            <button style="background: darkred; border: none;" type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </form>



    <form enctype="multipart/form-data" asp-action="EditProduct" asp-controller="Product">
        <div id="exampleModal1" class="modal" tabindex="-1" role="dialog">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-body form">
                        <div class="modal-header">
                            <h5 class="modal-title">Edit staff record.</h5>
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                            </button>
                        </div>
                        <div class="form-group">
                            <label asp-for="@Model.FirstName">First name:</label>
                            <input type="text" asp-for="@Model.FirstName" placeholder="Enter first name" />
                        </div>

                        <div class="form-group">
                            <label asp-for="@Model.LastName">Last name:</label>
                            <input type="text" asp-for="@Model.LastName" placeholder="Enter last name" />
                        </div>

                        <div class="form-group">
                            <label class="label" asp-for="@Model.CourseName">Course:</label>
                            <input type="text" asp-for="@Model.CourseName" placeholder="0.00" />
                        </div>

                        <div class="form-group">
                            <label class="label" asp-for="@Model.Email">Email:</label>
                            <input type="email" asp-for="@Model.Email" placeholder="example@gmail.com" />
                        </div>

                        <div class="form-group">
                            <label class="label" asp-for="@Model.Salary">Salary:</label>
                            <input type="Number" asp-for="@Model.Salary" placeholder="0.00" />
                        </div>

                        <div class="form-group">
                            <label class="label" asp-for="@Model.ProfilePic">Profile Photo:</label>
                            <input type="file" asp-for="@Model.ProfilePic" />
                        </div>

                        <div class="modal-footer">
                            <button style="background: #E7AB3C !important; border: none;" type="submit" class="btn btn-primary">Save changes</button>
                            <button style="background: darkred; border: none;" type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </form>




    @if (Model != null)
    {
        <script type="text/javascript">
            $(function () {
                alert("Created Staff: " + @($"{Model.FirstName} {Model.LastName}"));
            });
        </script>
    }

    @if (students?.Count() == 0 || students == null)
    {
        <h3>There are no students enrolled to VIM yet.</h3>
    }
    else
    {
        <div>
            <table class="table table-striped">
                <thead>
                    <tr>
                        <th>S/N</th>
                        <th>First name</th>
                        <th>Last name</th>
                        <th>Is student</th>
                        <th>Email</th>
                        <th>Phone</th>
                        <th>Status</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var student in students)
                    {
                        var actionColor = student.IsStudent ? "forestgreen" : "darkred";
                        var titleDesc = student.IsSubscribed ? "Remove from hotsale" : "Add to hotsale";
                        <tr>
                            <td>@(count++)</td>
                            <td id="productname">@student.FirstName</td>
                            <td id="productprice">@student.LastName</td>
                            <td id="productquantity">@student.IsStudent</td>
                            <td id="productmin">@student.Email</td>
                            <td id="productstock">@student.PhoneNumber</td>
                            <td id="poductimg">@(student.IsSubscribed ? "Active" : "Not Active")</td>
                            <td>
                                <a asp-action="RemoveProduct" asp-controller="Product" asp-route-id="@student.Id" style="border: 1px solid darkred; padding:5px; border-radius:3px; cursor: pointer" title="Delete product"><i style="color: darkred" class="fa fa-trash"></i></a>
                                <a asp-route-id="@student.Id"
                                   style="border: 1px solid forestgreen; border-radius:3px; cursor: pointer; padding:5px;"
                                   title="Edit student record"
                                   onclick="populate"
                                   data-toggle="modal" data-target="#exampleModal1"><i style="color: forestgreen" class="fa fa-edit"></i></a>
                                <a id="hot" asp-action="CreateStaff" asp-controller="AdminDashboard" asp-route-id="@student.Id" style="border: 1px solid purple; border-radius:3px; cursor: pointer; padding:5px;" title="Make a staff"><i style="color: cadetblue" class="fa fa-plus"></i></a>
                                <a id="hot" onclick="makestaff()" asp-action="UserProfile" asp-controller="Profile" asp-route-id="@student.Id" style="border: 1px solid purple; border-radius:3px; cursor: pointer; padding:5px;" title="Make a staff"><i style="color: cadetblue" class="fa fa-eye"></i></a>
                            </td>
                        </tr>
                    }
                </tbody>
            </table>
        </div>
    }

    <script src="~/js/product.js"></script>

    @* <script>
    $(document).ready(function() {
    $('.custom-file-input').on("change", function() {
    var filename = $(this).val().split("\\").pop();
    $(this).next('.custom-file-label').html(filename);
    });
    });
    </script>*@

    <script>
        $(document).ready(function () {
            $('.custom-file-input').on("change", function () {
                var filename = $(this).val().split("\\").pop();
                $(this).next('.custom-file-label').html(filename);
            });
        });

        function makestaff(){
            aler("Are you sure you want to make this user a staff of VIM?")
        }
    </script>
</div>
